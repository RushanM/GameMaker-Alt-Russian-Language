# События отрисовки

[*Оригинальная статья.*](https://manual.gamemaker.io/beta/en/index.htm#t=The_Asset_Editors%2FObject_Properties%2FDraw_Events.htm)

---

<p align="center">
    <img src="https://github.com/RushanM/GameMaker-Alt-Russian-Language/blob/main/Ассеты/Документация. События отрисовки. 1.png?raw=true">
</p>

События категории **«При отрисовке»** определяют, что именно вы видите на экране при запуске игры. Они разделены на несколько отдельных подтипов, чтобы упростить работу с разными задачами по отрисовке. Ниже представлена схема, показывающая порядок выполнения этих событий:

<p align="center">
    <img src="https://github.com/RushanM/GameMaker-Alt-Russian-Language/blob/main/Ассеты/Документация. События отрисовки. 2.png?raw=true">
</p>

Обычное событие «При отрисовке» делится на три подтипа: **«При начале отрисовки»**, стандартное **«При отрисовке»** и **«В конце отрисовки»**. В большинстве случаев вы будете использовать стандартное событие «При отрисовке». При этом важно помнить, что у всех экземпляров объектов в комнате событие «При отрисовке» (или его подтипы) будет вызываться каждый кадр («шаг») игры, при условии, что у экземпляра установлен флаг [**`Видим`**](https://manual.gamemaker.io/beta/en/GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/visible.htm) со значением `true`. Даже если вы не прописали в событии «При отрисовке» никакого кода (ни действий, ни скриптов), *но при этом объект имеет прикреплённый спрайт, GameMaker всё равно будет вызывать событие «При отрисовке» и отображать этот спрайт*. Причина в том, что у GameMaker два способа отрисовывать вещи в событии отрисовки:

* **стандартная отрисовка**. Если в объекте задан спрайт, но в событии «При отрисовке» нет ни кода, ни действий, GameMaker автоматически отрисует этот спрайт (или ничего не отрисует, если спрайт не назначен). При этом любые изменения, внесённые в других событиях (например, изменения `image_xscale`, `image_yscale`, `sprite_index`, `image_blend` и т. п.), будут учтены;
* **пользовательская отрисовка**. Если в событии «При отрисовке» присутствует код или действия, вы тем самым указываете GameMaker: «Я сам хочу указывать, что именно должно отрисовываться для экземпляров этого объекта». Это полностью отключает стандартную отрисовку спрайта. Например, если в событии «При отрисовке» вы написали код для отображения текста, но не указали, что нужно отрисовать и спрайт, то на экране будет только текст.

Ниже описаны остальные события из категории «При отрисовке».

<details>
<summary><h2>«При начале отрисовки» и «В конце отрисовки»</h2></summary>

Помимо стандартного события «При отрисовке», существуют также **«При начале отрисовки»** и **«В конце отрисовки»**. Они работают так же, как и обычное событие «При отрисовке» (то есть будут выполняться каждый кадр игры на всех портах просмотра), но при этом они не отрисовывают ничего по умолчанию (не имеют «стандартной отрисовки»), если вы не добавили их явно в объект, а также они всегда будут выполняться **до** или **после** стандартного «При отрисовке». Так что в ходе каждого кадра игры порядок всегда будет оставаться такой: «При начале отрисовки» → «При отрисовке» → «В конце отрисовки» (для всех экземпляров).

Таким образом, вы можете, к примеру, в событии «При начале отрисовки» одного экземпляра установить какие-то параметры отрисовки, и будьте уверены, что все экземпляры со стандартным «При отрисовке» или «В конце отрисовки» отрисуют свои объекты с учётом уже установленных параметров. Аналогично, событие «В конце отрисовки» позволит вам отрисовать что-то поверх всего, что уже было выведено в «При отрисовке».

### Важные замечания по работе с отрисовкой

* событие «При отрисовке» — одно из самых «тяжёлых» с точки зрения вычислительной нагрузки. Поэтому нежелательно выполнять в нём сложные расчёты. Лучше оставить его только для отрисовки, а логику или большие объёмы кода выносить в другие события («Каждый кадр», отложки и т. д.);
* если параметр «Видим» объекта выключен, **все события отрисовки** (кроме **«При изменении размера окна»**) **для экземпляров этого объекта пропускаются**. То есть код в «При отрисовке», «При начале отрисовки», «В конце отрисовки» и т. п. не будет выполняться;
* то, что вы рисуете, никак не влияет на систему столкновений (традиционную или физическую). Столкновения определяются свойствами объекта и его спрайтом (или маской).

</details>

---

* **назад:** [«События объекта»](Object_Events.htm),
* **далее:** [«Асинхронные события»](Async_Events.htm).